<h1>HttpClient</h1>

<div class="d-flex flex-column border border-secondary-subtle rounded-4 p-2">
    <input
        [(ngModel)]="todoTitle"
        type="text"
        class="form-control"
    >
    <div class="d-flex mt-2">
        <button
            class="btn btn-primary"
            (click)="addTodo()"
        >
            Add
        </button>
        <button
            class="btn btn-primary ms-2"
            (click)="fetchTodos()"
        >
            Load
        </button>
    </div>
</div>
<hr>
<div *ngIf="!loading; else loadingBlock">
    <div *ngIf="todos.length; else noTodos">
        <div
            *ngFor="let todo of todos"
            class="d-flex border border-secondary-subtle rounded-4 p-2 mb-2"
        >
            <h4
                class="mb-0"
                [ngClass]="{'text-decoration-line-through': todo.completed}"
            >
                {{ todo.title | titlecase}}
            </h4>
            <button
                class="btn btn-danger ms-auto"
                (click)="removeTodo(todo.id)"
            >
                Delete
            </button>
            <button
                class="btn btn-primary ms-2"
                [disabled]="todo.completed"
                (click)="completeTodo(todo.id)"
            >
                End
            </button>
        </div>
    </div>
</div>

<ng-template #noTodos>
    <h4>No todos</h4>
</ng-template>

<ng-template #loadingBlock>
    <div
        class="d-flex border border-secondary-subtle rounded-4 px-2 py-3 mb-2"
    >
        <div class="placeholder-glow w-100">
            <span class="placeholder col-6"></span>
        </div>
        <div class="placeholder-glow w-25">
            <span class="placeholder col-5"></span>
            <span class="placeholder col-5 ms-2"></span>
        </div>
    </div>
    <div
        class="d-flex border border-secondary-subtle rounded-4 px-2 py-3 mb-2"
    >
        <div class="placeholder-glow w-100">
            <span class="placeholder col-6"></span>
        </div>
        <div class="placeholder-glow w-25">
            <span class="placeholder col-5"></span>
            <span class="placeholder col-5 ms-2"></span>
        </div>
    </div>
    <div
        class="d-flex border border-secondary-subtle rounded-4 px-2 py-3 mb-2"
    >
        <div class="placeholder-glow w-100">
            <span class="placeholder col-6"></span>
        </div>
        <div class="placeholder-glow w-25">
            <span class="placeholder col-5"></span>
            <span class="placeholder col-5 ms-2"></span>
        </div>
    </div>
</ng-template>

<div
    *ngIf="error"
    class="alert alert-danger position-fixed start-0 bottom-0"
    role="alert"
>
    {{ errorMessage }}
</div>